/*!
 * mDialog v1.3.1
 * Copyright 2013-2014 Frans.Lee, http://www.ifrans.cn
 * v1.3.1 2014-04-23 #修复一处自定义class相关的问题
 * v1.3 2014-04-01 #优化弹窗内容过多时的上下滑动体验
 * v1.2 2014-03-18 #修复一处问题，兼容android 2.3.x
 * v1.1 2014-02-19 #阻止touchmove事件
 */
;(function(){var b='<div class="ui-dialog-inner"><div class="ui-dialog-header"><h2 class="ui-dialog-title"></h2><a href="javascript:;" class="ui-dialog-btn ui-dialog-close-btn"></a></div><div class="ui-dialog-cont-wrapper"><div class="ui-dialog-content"></div></div><div class="ui-dialog-btn-wrapper"></div></div>';var a=function(g,f){f=f||{};var d=a.config;var c=(f.cancelBtn&&!f.cancelBtn.hide)?false:true;for(var h in d){f[h]=f[h]===undefined?d[h]:f[h];if(Object.prototype.toString.call(d[h]).toLowerCase()=="[object object]"){for(var e in d[h]){f[h][e]=f[h][e]===undefined?d[h][e]:f[h][e]}}}f.cancelBtn.hide=c;a.config.zIndex=f.zIndex;return new a.prototype.init(g,f)};a.prototype={constructor:a,init:function(j,f){if(!j){return}var h,d=true,g=this;if(g.elems(".ui-dialog")){var e=0,c=g.elems(".ui-dialog").length;while(e<c){if(g.elems(".ui-dialog")[e].style.display=="none"){h=g.elems(".ui-dialog")[e];d=false;break}e++}}this.DOM=h=h||document.createElement("div");h.innerHTML=b;h.className="ui-dialog "+(f.mask?"ui-dialog-mask ":"")+f.addClass;g.domElem(".ui-dialog-title").innerText=f.title;g.domElem(".ui-dialog-content").innerHTML=j;h.style.zIndex=a.config.zIndex++;h.id=f.id;g.createBtn(f);if(d){h.addEventListener("touchmove",function(i){i.target.className!="ui-dialog-content"&&i.preventDefault()});document.body.appendChild(h)}else{h.style.display=""}return this},domElem:function(c){return this.DOM.querySelector(c)},elems:function(c){return document.querySelectorAll(c)},close:function(c){(c||this.DOM).style.display="none";return false},createBtn:function(d){var f=this,e=this.DOM,c="";f.domElem(".ui-dialog-close-btn").style.display=d.closeBtn.hide?"none":"";if(d.isLoading){f.domElem(".ui-dialog-cont-wrapper").style.borderBottom="0";f.domElem(".ui-dialog-btn-wrapper").style.display="none";f.domElem(".ui-dialog-mask .ui-dialog-inner").style.width="50%"}if(!d.okBtn.hide){c+='<a href="javascript:;" class="ui-dialog-btn btn-a ok-btn">'+d.okBtn.text+"</a>"}if(!d.cancelBtn.hide){c+='<a href="javascript:;" class="ui-dialog-btn btn-b cancel-btn">'+d.cancelBtn.text+"</a>"}f.domElem(".ui-dialog-btn-wrapper").innerHTML=c;if(f.domElem(".ok-btn")){f.domElem(".ok-btn").addEventListener("click",function(){if(d.okBtn.callback&&d.okBtn.callback.call(f)==false){return}f.close()},false)}if(f.domElem(".cancel-btn")){f.domElem(".cancel-btn").addEventListener("click",function(){if(d.cancelBtn.callback&&d.cancelBtn.callback.call(f)==false){return}f.close()},false)}if(f.domElem(".ui-dialog-close-btn")){f.domElem(".ui-dialog-close-btn").addEventListener("click",function(){if(d.closeBtn.callback&&d.closeBtn.callback.call(f)==false){return}f.close()},false)}}};a.close=function(c){if(!c){return}a().close(c)};a.config={title:"提示信息",mask:true,id:"",addClass:"",zIndex:9900,okBtn:{hide:false,text:"确定",callback:null},cancelBtn:{hide:false,text:"取消",callback:null},closeBtn:{hide:false,callback:null}};a.prototype.init.prototype=a.prototype;window.mDialog=a})(window,undefined);